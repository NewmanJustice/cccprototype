{% extends "layout.njk" %}

{% block pageTitle %}Legacy Feature Sets - Admin{% endblock %}

{% block content %}
<div class="govuk-width-container">
  <main class="govuk-main-wrapper" id="main-content" role="main">
    <div class="govuk-grid-row">
      <div class="govuk-grid-column-full">
        <a href="/admin" class="govuk-back-link">Back to dashboard</a>

        <h1 class="govuk-heading-xl">Legacy Feature Sets</h1>

        <p class="govuk-body">
          These are archived feature sets from previous catalogue versions. 
          They are read-only and preserved for historical reference and legacy assessment data.
        </p>

        {% if legacySets.length > 0 %}
        <table class="govuk-table">
          <thead class="govuk-table__head">
            <tr class="govuk-table__row">
              <th scope="col" class="govuk-table__header">Archive Name</th>
              <th scope="col" class="govuk-table__header">Date Archived</th>
              <th scope="col" class="govuk-table__header">Features</th>
              <th scope="col" class="govuk-table__header">Actions</th>
            </tr>
          </thead>
          <tbody class="govuk-table__body">
            {% for set in legacySets %}
            <tr class="govuk-table__row">
              <td class="govuk-table__cell">{{ set.name }}</td>
              <td class="govuk-table__cell">{{ set.created_at }}</td>
              <td class="govuk-table__cell">{{ set.featureCount }}</td>
              <td class="govuk-table__cell">
                <a href="/admin/legacy-features/{{ set.id }}" class="govuk-link">View</a>
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
        {% else %}
        <div class="govuk-inset-text">
          <p class="govuk-body">No legacy feature sets found.</p>
          <p class="govuk-body">
            Legacy feature sets are created when you replace the entire catalogue using the 
            <a href="/admin/replace-features" class="govuk-link">Replace Feature Set</a> function.
          </p>
        </div>
        {% endif %}
      </div>
    </div>
  </main>
</div>
{% endblock %}
