{% extends "layout.njk" %}
{% block content %}
<a class="govuk-back-link" href="/features">Back to catalogue</a>

<h1 class="govuk-heading-l">Compare selected features</h1>

{% if errors and errors.length %}
<div class="govuk-error-summary" aria-labelledby="compare-errors" role="alert" tabindex="-1" data-module="govuk-error-summary">
  <h2 class="govuk-error-summary__title" id="compare-errors">There is a problem</h2>
  <div class="govuk-error-summary__body">
    <ul class="govuk-list govuk-error-summary__list">
      {% for err in errors %}
        <li>{{ err }}</li>
      {% endfor %}
    </ul>
  </div>
</div>
{% endif %}

{% if items.length < 2 %}
<p class="govuk-body">Select at least two and up to five features to compare. Your selections persist across pages. Go back to the catalogue to add more.</p>
<p class="govuk-body"><a class="govuk-link" href="/features">Return to catalogue</a></p>
{% else %}

<table class="govuk-table">
  <thead class="govuk-table__head">
    <tr class="govuk-table__row">
      <th scope="col" class="govuk-table__header">ID</th>
      <th scope="col" class="govuk-table__header">Component</th>
      <th scope="col" class="govuk-table__header">Feature Group</th>
      <th scope="col" class="govuk-table__header">Feature</th>
      <th scope="col" class="govuk-table__header">User Role</th>
      <th scope="col" class="govuk-table__header">Dependencies</th>
    </tr>
  </thead>
  <tbody class="govuk-table__body">
    {% for item in items %}
      <tr class="govuk-table__row">
        <td class="govuk-table__cell">{{ item.unique_id }}</td>
        <td class="govuk-table__cell">{{ item.component_code }} — {{ item.component_name }}</td>
        <td class="govuk-table__cell">{{ item.feature_group_code }} — {{ item.feature_group }}</td>
        <td class="govuk-table__cell">{{ item.feature_name }}</td>
        <td class="govuk-table__cell">{{ item.as_a }}</td>
        <td class="govuk-table__cell">{{ item.dependencies or 'None' }}</td>
      </tr>
    {% endfor %}
  </tbody>
</table>
{% endif %}
{% endblock %}
